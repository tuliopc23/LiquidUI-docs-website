
# GlassDropdown

A flexible dropdown component for toggling contextual overlays containing actions or information, featuring smart positioning and Apple HIG-compliant interactions.

## Overview

GlassDropdown provides a versatile overlay system for displaying contextual content such as forms, information panels, or action lists. Built with Liquidify's Liquid Glass material system, it offers intelligent positioning, responsive behavior, and smooth animations.

## Basic Usage

```tsx
import { GlassDropdown } from 'liquidify';

function BasicDropdown() {
  return (
    <GlassDropdown
      trigger={<button>Open Dropdown</button>}
      content={
        <div className='p-4'>
          <h3 className='font-semibold mb-2'>Quick Actions</h3>
          <p>Choose an action to perform.</p>
          <div className='mt-4 space-y-2'>
            <button className='block w-full text-left'>Action 1</button>
            <button className='block w-full text-left'>Action 2</button>
            <button className='block w-full text-left'>Action 3</button>
          </div>
        </div>
      }
    />
  );
}
```

## Interactive Demo

```tsx
<GlassDropdown
  trigger={
    <button className='bg-blue-500 text-white py-2 px-4 rounded'>
      User Profile
    </button>
  }
  content={
    <div className='p-6 min-w-[280px]'>
      <div className='flex items-center space-x-3 mb-4'>
        <div className='w-10 h-10 bg-gray-300 rounded-full'></div>
        <div>
          <p className='font-semibold'>John Doe</p>
          <p className='text-sm text-gray-600'>john@example.com</p>
        </div>
      </div>
      <hr className='my-4 border-gray-200' />
      <div className='space-y-2'>
        <button className='block w-full text-left px-2 py-1 hover:bg-gray-100 rounded'>
          View Profile
        </button>
        <button className='block w-full text-left px-2 py-1 hover:bg-gray-100 rounded'>
          Account Settings
        </button>
        <button className='block w-full text-left px-2 py-1 hover:bg-gray-100 rounded'>
          Sign Out
        </button>
      </div>
    </div>
  }
  placement='bottom-end'
  variant='default'
/>
```

## API Reference

### GlassDropdown Props

| Prop                  | Type                                                                                                                                                                 | Default     | Description                           |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ------------------------------------- |
| `trigger`             | `React.ReactNode`                                                                                                                                                    | -           | Component to trigger the dropdown     |
| `content`             | `React.ReactNode`                                                                                                                                                    | -           | Content to display in the dropdown    |
| `open`                | `boolean`                                                                                                                                                            | `false`     | Control dropdown open state           |
| `onOpenChange`        | `(open: boolean) => void`                                                                                                                                            | -           | Callback on open state change         |
| `placement`           | `'top' \| 'bottom' \| 'left' \| 'right' \| 'top-start' \| 'top-end' \| 'bottom-start' \| 'bottom-end' \| 'left-start' \| 'left-end' \| 'right-start' \| 'right-end'` | `'bottom'`  | Dropdown position relative to trigger |
| `variant`             | `'default' \| 'minimal' \| 'outlined'`                                                                                                                               | `'default'` | Visual style variant                  |
| `size`                | `'sm' \| 'md' \| 'lg'`                                                                                                                                               | `'md'`      | Component size                        |
| `disabled`            | `boolean`                                                                                                                                                            | `false`     | Disable the dropdown                  |
| `closeOnClickOutside` | `boolean`                                                                                                                                                            | `true`      | Close on outside click                |
| `closeOnEscape`       | `boolean`                                                                                                                                                            | `true`      | Close on Escape key                   |
| `offset`              | `number`                                                                                                                                                             | `8`         | Distance from trigger                 |
| `crossAxis`           | `number`                                                                                                                                                             | `0`         | Cross-axis offset                     |
| `className`           | `string`                                                                                                                                                             | -           | Additional CSS classes                |
| `contentClassName`    | `string`                                                                                                                                                             | -           | CSS classes for content container     |
| `overlayClassName`    | `string`                                                                                                                                                             | -           | CSS classes for overlay               |

### Trigger Options

| Prop         | Type                                        | Default   | Description                   |
| ------------ | ------------------------------------------- | --------- | ----------------------------- |
| `triggerOn`  | `'click' \| 'hover' \| 'focus' \| 'manual'` | `'click'` | How to trigger the dropdown   |
| `hoverDelay` | `number`                                    | `200`     | Delay before opening on hover |
| `focusDelay` | `number`                                    | `0`       | Delay before opening on focus |

## Variants

### Default Dropdown

```tsx
<GlassDropdown
  trigger={<button>Default</button>}
  content={<div>Content here</div>}
  variant='default'
/>
```

### Minimal Style

```tsx
<GlassDropdown
  trigger={<button>Minimal</button>}
  content={<div>Content here</div>}
  variant='minimal'
/>
```

### Outlined Style

```tsx
<GlassDropdown
  trigger={<button>Outlined</button>}
  content={<div>Content here</div>}
  variant='outlined'
/>
```

## Features

### Smart Positioning

```tsx
// Automatically adjusts position to stay in viewport
<GlassDropdown
  trigger={<button>Smart Position</button>}
  content={<div>This will position automatically</div>}
  placement='bottom'
  offset={12}
/>
```

### Hover Trigger

```tsx
<GlassDropdown
  trigger={<button>Hover Me</button>}
  content={<div>Opens on hover</div>}
  triggerOn='hover'
  hoverDelay={300}
/>
```

### Focus Trigger

```tsx
<GlassDropdown
  trigger={<input placeholder='Focus trigger' />}
  content={<div>Opens on focus</div>}
  triggerOn='focus'
/>
```

### Controlled Dropdown

```tsx
function ControlledDropdown() {
  const [open, setOpen] = useState(false);

  return (
    <GlassDropdown
      trigger={
        <button onClick={() => setOpen(!open)}>
          {open ? 'Close' : 'Open'} Dropdown
        </button>
      }
      content={<div>Controlled content</div>}
      open={open}
      onOpenChange={setOpen}
    />
  );
}
```

### Rich Content

```tsx
<GlassDropdown
  trigger={<button>Rich Content</button>}
  content={
    <div className='p-6 max-w-sm'>
      <h3 className='text-lg font-semibold mb-2'>Notification Settings</h3>
      <form className='space-y-4'>
        <label className='flex items-center'>
          <input type='checkbox' className='mr-2' />
          Email notifications
        </label>
        <label className='flex items-center'>
          <input type='checkbox' className='mr-2' />
          Push notifications
        </label>
        <div className='flex space-x-2'>
          <button className='px-3 py-1 bg-blue-500 text-white rounded'>
            Save
          </button>
          <button className='px-3 py-1 border rounded'>Cancel</button>
        </div>
      </form>
    </div>
  }
  placement='bottom-start'
/>
```

## Advanced Usage

### Portal Rendering

```tsx
<GlassDropdown
  trigger={<button>Portal Dropdown</button>}
  content={<div>Rendered in portal</div>}
  portal={true}
  portalContainer={document.body}
/>
```

### Custom Animation

```tsx
<GlassDropdown
  trigger={<button>Custom Animation</button>}
  content={<div>Animated content</div>}
  animationDuration={300}
  animationEasing='ease-out'
/>
```

### Nested Dropdowns

```tsx
<GlassDropdown
  trigger={<button>Parent</button>}
  content={
    <div>
      <p>Parent content</p>
      <GlassDropdown
        trigger={<button>Nested</button>}
        content={<div>Nested content</div>}
        placement='right-start'
      />
    </div>
  }
/>
```

## Accessibility

### ARIA Support

- **`role="button"`**: Applied to trigger elements
- **`aria-haspopup="true"`**: Indicates a popup trigger
- **`aria-expanded`**: Indicates dropdown open state
- **`aria-controls`**: Links trigger to dropdown content
- **`aria-describedby`**: Links to additional descriptions

### Keyboard Navigation

| Key               | Action                            |
| ----------------- | --------------------------------- |
| `Enter` / `Space` | Toggle dropdown (on trigger)      |
| `Escape`          | Close dropdown                    |
| `Tab`             | Navigate through dropdown content |
| `Arrow Keys`      | Navigate focusable elements       |

### Screen Reader Support

```tsx
<GlassDropdown
  trigger={<button aria-label='User menu'>Profile</button>}
  content={<div role='menu'>Menu content</div>}
  aria-describedby='dropdown-description'
/>
```

## Styling and Customization

### CSS Custom Properties

```css
.glass-dropdown {
  --dropdown-bg: rgba(255, 255, 255, 0.1);
  --dropdown-border: rgba(255, 255, 255, 0.2);
  --dropdown-border-radius: 8px;
  --dropdown-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  --dropdown-backdrop-blur: 20px;
  --dropdown-max-width: 320px;
  --dropdown-max-height: 400px;
  --dropdown-padding: 16px;
  --dropdown-z-index: 1000;
  --dropdown-transition: all 0.2s ease;
}
```

### Size Variants

```tsx
// Small dropdown
<GlassDropdown
  trigger={<button>Small</button>}
  content={<div>Small content</div>}
  size="sm"
/>

// Large dropdown
<GlassDropdown
  trigger={<button>Large</button>}
  content={<div>Large content</div>}
  size="lg"
/>
```

### Theme Integration

```tsx
<GlassDropdown
  trigger={<button>Themed</button>}
  content={<div>Themed content</div>}
  className='dark:bg-gray-900/50 light:bg-white/50'
  contentClassName='dark:border-gray-600 light:border-gray-300'
/>
```

## Integration Examples

### Form Field Dropdown

```tsx
function FormFieldDropdown() {
  const [selectedOption, setSelectedOption] = useState('');

  return (
    <GlassDropdown
      trigger={
        <button className='w-full text-left border rounded px-3 py-2'>
          {selectedOption || 'Select option...'}
        </button>
      }
      content={
        <div className='py-2'>
          {options.map(option => (
            <button
              key={option.value}
              onClick={() => setSelectedOption(option.label)}
              className='block w-full text-left px-3 py-2 hover:bg-gray-100'
            >
              {option.label}
            </button>
          ))}
        </div>
      }
      placement='bottom-start'
    />
  );
}
```

### Notification Center

```tsx
<GlassDropdown
  trigger={
    <button className='relative'>
      <Icon name='bell' />
      {unreadCount > 0 && (
        <span className='absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center'>
          {unreadCount}
        </span>
      )}
    </button>
  }
  content={
    <div className='w-80 max-h-96 overflow-y-auto'>
      <div className='p-4 border-b'>
        <h3 className='font-semibold'>Notifications</h3>
      </div>
      {notifications.map(notification => (
        <NotificationItem key={notification.id} {...notification} />
      ))}
    </div>
  }
  placement='bottom-end'
/>
```

### Search Suggestions

```tsx
function SearchDropdown() {
  const [query, setQuery] = useState('');
  const [suggestions, setSuggestions] = useState([]);

  return (
    <GlassDropdown
      trigger={
        <input
          value={query}
          onChange={e => setQuery(e.target.value)}
          placeholder='Search...'
          className='w-full border rounded px-3 py-2'
        />
      }
      content={
        <div className='py-2'>
          {suggestions.map(suggestion => (
            <button
              key={suggestion.id}
              onClick={() => setQuery(suggestion.text)}
              className='block w-full text-left px-3 py-2 hover:bg-gray-100'
            >
              {suggestion.text}
            </button>
          ))}
        </div>
      }
      open={query.length > 0 && suggestions.length > 0}
      triggerOn='focus'
      placement='bottom-start'
    />
  );
}
```

## Best Practices

### Do's

- **Use appropriate triggers**: Choose the right trigger method for the context
- **Provide clear indicators**: Show when content is available in the dropdown
- **Consider positioning**: Place dropdowns to avoid viewport overflow
- **Enable keyboard navigation**: Support full keyboard accessibility
- **Use semantic HTML**: Apply proper ARIA roles and attributes

### Don'ts

- **Don't overcrowd content**: Keep dropdown content focused and scannable
- **Don't disable outside clicks**: Unless absolutely necessary for user flow
- **Don't forget mobile**: Ensure dropdowns work well on touch devices
- **Don't break focus management**: Maintain logical focus flow
- **Don't ignore loading states**: Show feedback for async content

## Common Use Cases

### User Profile Menu

```tsx
<GlassDropdown
  trigger={
    <button className='flex items-center space-x-2'>
      <Avatar src={user.avatar} size='sm' />
      <span>{user.name}</span>
      <Icon name='chevron.down' />
    </button>
  }
  content={
    <div className='py-2'>
      <div className='px-3 py-2 border-b'>
        <p className='font-semibold'>{user.name}</p>
        <p className='text-sm text-gray-600'>{user.email}</p>
      </div>
      <button className='block w-full text-left px-3 py-2 hover:bg-gray-100'>
        Profile Settings
      </button>
      <button className='block w-full text-left px-3 py-2 hover:bg-gray-100'>
        Sign Out
      </button>
    </div>
  }
  placement='bottom-end'
/>
```

### Quick Actions

```tsx
<GlassDropdown
  trigger={<button>Quick Actions</button>}
  content={
    <div className='py-2'>
      <button className='block w-full text-left px-3 py-2 hover:bg-gray-100'>
        <Icon name='plus' className='mr-2' />
        Create New
      </button>
      <button className='block w-full text-left px-3 py-2 hover:bg-gray-100'>
        <Icon name='square.and.arrow.up' className='mr-2' />
        Export Data
      </button>
      <button className='block w-full text-left px-3 py-2 hover:bg-gray-100'>
        <Icon name='gear' className='mr-2' />
        Settings
      </button>
    </div>
  }
/>
```

### Filter Panel

```tsx
<GlassDropdown
  trigger={<button>Filters ({activeFilters.length})</button>}
  content={
    <div className='p-4 min-w-[300px]'>
      <h3 className='font-semibold mb-3'>Filter Options</h3>
      <div className='space-y-3'>
        <FilterSection title='Category' options={categories} />
        <FilterSection title='Price Range' options={priceRanges} />
        <FilterSection title='Rating' options={ratings} />
      </div>
      <div className='flex space-x-2 mt-4 pt-3 border-t'>
        <button className='px-3 py-1 bg-blue-500 text-white rounded'>
          Apply
        </button>
        <button className='px-3 py-1 border rounded'>Clear All</button>
      </div>
    </div>
  }
  placement='bottom-start'
/>
```

## Related Components

- [GlassMenu](/components/navigation/glass-menu) - For structured menu actions
- [GlassPopover](/components/overlay/glass-popover) - For information overlays
- [GlassTooltip](/components/overlay/glass-tooltip) - For contextual help text
- [GlassModal](/components/overlay/glass-modal) - For modal dialogs

---

_GlassDropdown provides a versatile solution for contextual overlays, following Apple's Human Interface Guidelines for optimal user experience and accessibility._
