import { GlassModal } from "../../components/PlaceholderComponents";
import { ComponentShowcase } from "../../components/ComponentShowcase";
import { X, AlertTriangle, CheckCircle, Info, Trash2, Save } from "lucide-react";

# Modal

A versatile modal component with glassmorphism design, smooth animations, and comprehensive overlay management.

## Basic Usage

<ComponentShowcase
  title="Basic Modal"
  description="Simple modal with content and actions"
  code={`// Basic modal example
function BasicModal() {
  const [isOpen, setIsOpen] = useState(false);
  
  return (
    <>
      <GlassButton onClick={() => setIsOpen(true)}>
        Open Modal
      </GlassButton>
      
      <GlassModal
        isOpen={isOpen}
        onClose={() => setIsOpen(false)}
        title="Modal Title"
      >
        <p>This is the modal content. You can put any content here.</p>
        <div className="flex gap-2 mt-4">
          <GlassButton onClick={() => setIsOpen(false)}>Cancel</GlassButton>
          <GlassButton variant="primary">Confirm</GlassButton>
        </div>
      </GlassModal>
    </>
  );
}`}
>
  <div className="space-y-4">
    <div className="glass-effect rounded-lg p-3 text-center cursor-pointer hover:bg-white/10 transition-colors">
      Open Basic Modal
    </div>
    <div className="glass-card p-6 max-w-md">
      <div className="flex items-center justify-between mb-4">
        <h3 className="text-lg font-semibold">Modal Preview</h3>
        <X className="w-5 h-5 text-muted-foreground cursor-pointer" />
      </div>
      <p className="text-muted-foreground mb-4">
        This is how a modal would appear with glassmorphism effects.
      </p>
      <div className="flex gap-2">
        <div className="glass-effect rounded px-3 py-1 text-sm cursor-pointer">Cancel</div>
        <div className="glass-effect rounded px-3 py-1 text-sm cursor-pointer bg-primary/20">Confirm</div>
      </div>
    </div>
  </div>
</ComponentShowcase>

## Modal Variants

<ComponentShowcase
  title="Modal Types"
  description="Different modal variants for various use cases"
  code={`// Info Modal
<GlassModal
  isOpen={showInfo}
  onClose={() => setShowInfo(false)}
  variant="info"
  title="Information"
  icon={<Info />}
>
  <p>Here's some important information for you.</p>
</GlassModal>

// Warning Modal
<GlassModal
  isOpen={showWarning}
  onClose={() => setShowWarning(false)}
  variant="warning"
  title="Warning"
  icon={<AlertTriangle />}
>
  <p>Are you sure you want to proceed? This action cannot be undone.</p>
</GlassModal>

// Success Modal
<GlassModal
  isOpen={showSuccess}
  onClose={() => setShowSuccess(false)}
  variant="success"
  title="Success"
  icon={<CheckCircle />}
>
  <p>Your action was completed successfully!</p>
</GlassModal>`}
>
  <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
    <div className="glass-card p-4">
      <div className="flex items-center gap-3 mb-3">
        <div className="p-2 glass-effect rounded-lg">
          <Info className="w-4 h-4 text-blue-400" />
        </div>
        <h4 className="font-medium">Info Modal</h4>
      </div>
      <p className="text-sm text-muted-foreground mb-3">
        Display informational content to users.
      </p>
      <div className="glass-effect rounded px-3 py-1 text-xs text-center cursor-pointer">
        Show Info
      </div>
    </div>
    
    <div className="glass-card p-4">
      <div className="flex items-center gap-3 mb-3">
        <div className="p-2 glass-effect rounded-lg">
          <AlertTriangle className="w-4 h-4 text-orange-400" />
        </div>
        <h4 className="font-medium">Warning Modal</h4>
      </div>
      <p className="text-sm text-muted-foreground mb-3">
        Alert users about important actions.
      </p>
      <div className="glass-effect rounded px-3 py-1 text-xs text-center cursor-pointer">
        Show Warning
      </div>
    </div>
    
    <div className="glass-card p-4">
      <div className="flex items-center gap-3 mb-3">
        <div className="p-2 glass-effect rounded-lg">
          <CheckCircle className="w-4 h-4 text-green-400" />
        </div>
        <h4 className="font-medium">Success Modal</h4>
      </div>
      <p className="text-sm text-muted-foreground mb-3">
        Confirm successful operations.
      </p>
      <div className="glass-effect rounded px-3 py-1 text-xs text-center cursor-pointer">
        Show Success
      </div>
    </div>
  </div>
</ComponentShowcase>

## Sizes and Positioning

<ComponentShowcase
  title="Modal Sizes"
  description="Different modal sizes for various content types"
  code={`// Small Modal
<GlassModal size="sm" title="Small Modal">
  <p>Compact modal for simple actions.</p>
</GlassModal>

// Default Modal
<GlassModal size="default" title="Default Modal">
  <p>Standard modal size for most content.</p>
</GlassModal>

// Large Modal
<GlassModal size="lg" title="Large Modal">
  <p>Spacious modal for complex forms or detailed content.</p>
</GlassModal>

// Full Screen Modal
<GlassModal size="full" title="Full Screen Modal">
  <p>Full screen modal for immersive experiences.</p>
</GlassModal>`}
>
  <div className="grid gap-4 md:grid-cols-2">
    <div className="space-y-3">
      <div className="glass-card p-3 max-w-xs">
        <h4 className="font-medium text-sm mb-2">Small Modal</h4>
        <p className="text-xs text-muted-foreground">Compact size</p>
      </div>
      <div className="glass-card p-4 max-w-sm">
        <h4 className="font-medium mb-2">Default Modal</h4>
        <p className="text-sm text-muted-foreground">Standard size</p>
      </div>
    </div>
    <div className="space-y-3">
      <div className="glass-card p-5 max-w-lg">
        <h4 className="font-medium mb-2">Large Modal</h4>
        <p className="text-sm text-muted-foreground">Spacious for complex content</p>
      </div>
      <div className="glass-card p-6">
        <h4 className="font-medium mb-2">Full Screen</h4>
        <p className="text-sm text-muted-foreground">Immersive experience</p>
      </div>
    </div>
  </div>
</ComponentShowcase>

## Confirmation Dialogs

<ComponentShowcase
  title="Confirmation Modal"
  description="Modal for confirming destructive actions"
  code={`function DeleteConfirmation() {
  const [isOpen, setIsOpen] = useState(false);
  
  const handleDelete = () => {
    // Perform delete action
    console.log('Item deleted');
    setIsOpen(false);
  };
  
  return (
    <GlassModal
      isOpen={isOpen}
      onClose={() => setIsOpen(false)}
      title="Delete Item"
      variant="warning"
      icon={<Trash2 className="text-red-500" />}
    >
      <p className="mb-4">
        Are you sure you want to delete this item? This action cannot be undone.
      </p>
      <div className="flex gap-2 justify-end">
        <GlassButton 
          variant="secondary" 
          onClick={() => setIsOpen(false)}
        >
          Cancel
        </GlassButton>
        <GlassButton 
          variant="destructive" 
          onClick={handleDelete}
        >
          Delete
        </GlassButton>
      </div>
    </GlassModal>
  );
}`}
>
  <div className="glass-card p-6 max-w-md">
    <div className="flex items-center gap-3 mb-4">
      <div className="p-2 glass-effect rounded-lg">
        <Trash2 className="w-5 h-5 text-red-400" />
      </div>
      <h3 className="text-lg font-semibold">Delete Item</h3>
    </div>
    <p className="text-muted-foreground mb-4">
      Are you sure you want to delete this item? This action cannot be undone.
    </p>
    <div className="flex gap-2 justify-end">
      <div className="glass-effect rounded px-3 py-1 text-sm cursor-pointer">Cancel</div>
      <div className="glass-effect rounded px-3 py-1 text-sm cursor-pointer bg-red-500/20 text-red-400">
        Delete
      </div>
    </div>
  </div>
</ComponentShowcase>

## Form Modal

<ComponentShowcase
  title="Form in Modal"
  description="Modal containing a complete form"
  code={`function FormModal() {
  const [isOpen, setIsOpen] = useState(false);
  
  const handleSubmit = (e) => {
    e.preventDefault();
    // Handle form submission
    setIsOpen(false);
  };
  
  return (
    <GlassModal
      isOpen={isOpen}
      onClose={() => setIsOpen(false)}
      title="Create New Project"
      size="lg"
    >
      <form onSubmit={handleSubmit} className="space-y-4">
        <div>
          <label className="block text-sm font-medium mb-2">Project Name</label>
          <GlassInput placeholder="Enter project name" required />
        </div>
        
        <div>
          <label className="block text-sm font-medium mb-2">Description</label>
          <GlassTextarea 
            placeholder="Describe your project..." 
            rows={3}
          />
        </div>
        
        <div>
          <label className="block text-sm font-medium mb-2">Category</label>
          <GlassSelect placeholder="Select category">
            <option value="web">Web Development</option>
            <option value="mobile">Mobile App</option>
            <option value="design">Design</option>
          </GlassSelect>
        </div>
        
        <div className="flex gap-2 justify-end pt-4">
          <GlassButton 
            type="button" 
            variant="secondary"
            onClick={() => setIsOpen(false)}
          >
            Cancel
          </GlassButton>
          <GlassButton type="submit">
            <Save className="w-4 h-4 mr-2" />
            Create Project
          </GlassButton>
        </div>
      </form>
    </GlassModal>
  );
}`}
>
  <div className="glass-card p-6 max-w-lg">
    <h3 className="text-lg font-semibold mb-4">Create New Project</h3>
    <div className="space-y-4">
      <div>
        <label className="block text-sm font-medium mb-2">Project Name</label>
        <div className="glass-effect rounded-lg p-2">
          <input 
            className="w-full bg-transparent border-none outline-none text-sm placeholder-muted-foreground"
            placeholder="Enter project name" 
          />
        </div>
      </div>
      
      <div>
        <label className="block text-sm font-medium mb-2">Description</label>
        <div className="glass-effect rounded-lg p-2">
          <textarea 
            className="w-full bg-transparent border-none outline-none text-sm placeholder-muted-foreground resize-none"
            placeholder="Describe your project..." 
            rows={3}
          />
        </div>
      </div>
      
      <div className="flex gap-2 justify-end pt-4">
        <div className="glass-effect rounded px-3 py-1 text-sm cursor-pointer">Cancel</div>
        <div className="glass-effect rounded px-3 py-1 text-sm cursor-pointer bg-primary/20 flex items-center gap-2">
          <Save className="w-3 h-3" />
          Create Project
        </div>
      </div>
    </div>
  </div>
</ComponentShowcase>

## API Reference

### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `isOpen` | `boolean` | `false` | Whether the modal is open |
| `onClose` | `() => void` | - | Callback when modal should close |
| `title` | `string` | - | Modal title |
| `size` | `"sm" \| "default" \| "lg" \| "xl" \| "full"` | `"default"` | Modal size |
| `variant` | `"default" \| "info" \| "warning" \| "success" \| "error"` | `"default"` | Visual variant |
| `icon` | `React.ReactNode` | - | Icon to display in header |
| `children` | `React.ReactNode` | - | Modal content |
| `className` | `string` | - | Additional CSS classes |
| `overlayClassName` | `string` | - | Classes for the overlay |
| `closeOnOverlayClick` | `boolean` | `true` | Close modal when overlay is clicked |
| `closeOnEscape` | `boolean` | `true` | Close modal when Escape key is pressed |
| `showCloseButton` | `boolean` | `true` | Show the close button |
| `preventScroll` | `boolean` | `true` | Prevent body scroll when modal is open |

### Animation Properties

- **Entrance**: Smooth fade-in with scale animation
- **Exit**: Fade-out with scale animation
- **Backdrop**: Animated blur and opacity transition
- **Physics**: Spring-based animations for natural feel

### Accessibility

- **Focus Management**: Traps focus within modal when open
- **Keyboard Navigation**: Support for Escape and Tab keys
- **Screen Readers**: Proper ARIA attributes and announcements
- **Portal Rendering**: Renders outside normal DOM hierarchy
- **Role Attributes**: Correct modal and dialog roles

## Usage Guidelines

### Best Practices

- Use modals sparingly - they interrupt user flow
- Provide clear action buttons (primary and secondary)
- Always include a way to close the modal
- Keep content focused and concise
- Use appropriate sizes for content type

### When to Use

- **Confirmation**: Destructive or important actions
- **Forms**: Complex forms that need focus
- **Details**: Detailed views without page navigation
- **Alerts**: Important notifications requiring attention
- **Media**: Image galleries or video players

### When Not to Use

- Simple notifications (use Toast instead)
- Large amounts of content (use dedicated pages)
- Frequent interactions (use inline editing)
- Mobile-first experiences (consider drawer patterns)

## Examples

### Controlled Modal

```tsx
import { GlassModal, GlassButton } from "../../components/GlassComponents";
import { useState } from "react";

function ControlledModal() {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <>
      <GlassButton onClick={() => setIsOpen(true)}>
        Open Modal
      </GlassButton>
      
      <GlassModal
        isOpen={isOpen}
        onClose={() => setIsOpen(false)}
        title="Controlled Modal"
      >
        <p>This modal's state is controlled by React.</p>
        <GlassButton onClick={() => setIsOpen(false)}>
          Close
        </GlassButton>
      </GlassModal>
    </>
  );
}
```

### Async Action Modal

```tsx
import { GlassModal, GlassButton } from "../../components/GlassComponents";
import { useState } from "react";

function AsyncModal() {
  const [isOpen, setIsOpen] = useState(false);
  const [loading, setLoading] = useState(false);

  const handleAsyncAction = async () => {
    setLoading(true);
    try {
      await performAsyncAction();
      setIsOpen(false);
    } catch (error) {
      console.error('Action failed:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <GlassModal
      isOpen={isOpen}
      onClose={() => setIsOpen(false)}
      title="Async Action"
    >
      <p>Perform an async action?</p>
      <div className="flex gap-2 mt-4">
        <GlassButton 
          variant="secondary" 
          onClick={() => setIsOpen(false)}
          disabled={loading}
        >
          Cancel
        </GlassButton>
        <GlassButton 
          onClick={handleAsyncAction}
          loading={loading}
        >
          {loading ? 'Processing...' : 'Confirm'}
        </GlassButton>
      </div>
    </GlassModal>
  );
}
```
